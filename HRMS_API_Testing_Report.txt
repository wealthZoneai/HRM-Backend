HRMS API TESTING REPORT
Environment: Local (http://127.0.0.1:8000)
Authentication: JWT (Employee / TL / HR based)

=====================================================
1. DASHBOARD
=====================================================

API: GET /api/dashboard/summary/

Observed Response:
- attendance_today: null
- monthly_summary present with zero values
- project_status, announcements, leave_summary empty
- upcoming_holidays empty

Status:
- API works as expected for new users

Bugs / Observations:
- Frontend must handle null attendance_today safely
- Empty states required in UI (no crash)

-----------------------------------------------------

=====================================================
2. MY PROFILE
=====================================================

API: GET /api/my-profile/

Observed Response:
- Full employee profile data returned
- Includes user info, job, bank (masked), team lead details

Status:
- Working correctly

Bugs / Observations:
- None

-----------------------------------------------------

API: GET /api/my-profile/sensitive/

Observed Response:
- Sensitive fields returned
- Aadhaar, PAN, Passport masked
- temporary flag = true

Status:
- Working correctly

Bugs / Observations:
- None

-----------------------------------------------------

API: PATCH /api/my-profile/contact/
API: PATCH /api/my-profile/identification/

Observed Response:
- Empty response body
- Data updates successfully

Bugs / Observations:
- API should return updated object or success message
- QA should verify DB update

-----------------------------------------------------

=====================================================
3. CALENDAR (EMPLOYEE)
=====================================================

API: GET /api/calendar/events/

Observed Response:
- Paginated list
- Sometimes empty, sometimes populated

Status:
- Working correctly

Bugs / Observations:
- Frontend must handle empty results properly

-----------------------------------------------------

=====================================================
4. POLICY
=====================================================

API: GET /api/policy/

Observed Response:
- Empty list

Status:
- Working

-----------------------------------------------------

API: POST /api/policy/create/

Observed Response:
- Permission denied

Status:
- Correct (non-HR blocked)

-----------------------------------------------------

=====================================================
5. ANNOUNCEMENTS (EMPLOYEE / TL / HR)
=====================================================

API: GET /api/announcements/

Observed Response:
- Empty data list

Status:
- Working

-----------------------------------------------------

API: GET /api/tl-announcements/

Observed Response:
- Server error:
  AttributeError: TLAnnouncementSerializer missing

BUG:
- API crashes due to missing serializer
- Critical backend issue

-----------------------------------------------------

=====================================================
6. ATTENDANCE
=====================================================

API: POST /api/attendance/clock-in/

Observed Response:
- Clock-in successful
- status = working

Status:
- Working

-----------------------------------------------------

API: POST /api/attendance/clock-out/

Observed Response:
- Clock-out successful
- duration calculated
- status = absent

BUG:
- Status should be "present" after valid clock-out
- Incorrect status calculation

-----------------------------------------------------

API: GET /api/attendance/days/
API: GET /api/attendance/today/

Observed Response:
- Attendance data returned
- Status shown as absent

BUG:
- Status inconsistency propagates to listing APIs

-----------------------------------------------------

=====================================================
7. TIMESHEET (EMPLOYEE)
=====================================================

API: POST /api/timesheet/daily/update/

Validation Behavior:
- entries missing → error
- wrong data type → error
- missing start_time/end_time/task → error
- before clock-in → blocked
- after clock-out → blocked
- end_time <= start_time → blocked

Success Behavior:
- Entries saved correctly
- Duration calculated
- total_hours_workdone returned

Status:
- Core logic works

BUGS / ISSUES:
- description not required during update
- description field appears in daily form
- description entered later gets cleared on fetch

-----------------------------------------------------

API: GET /api/timesheet/daily/form/

Observed Response:
- Returns date, day, clock_in, clock_out, existing_entries

BUGS:
- clock_in and clock_out should NOT be editable
- Changing form values has no effect
- API contract mismatch between form and update

-----------------------------------------------------

=====================================================
8. TIMESHEET (HR / TL)
=====================================================

APIs:
- GET /api/timesheet/hr/daily/
- GET /api/timesheet/hr/monthly/
- GET /api/timesheet/hr/yearly/
- GET /api/timesheet/hr/worksheet/
- GET /api/timesheet/tl/daily/

Observed Behavior:
- Non-HR tokens rejected (correct)
- HR credentials required
- Daily, monthly, yearly aggregation works correctly

Status:
- Working as expected

-----------------------------------------------------

=====================================================
9. LEAVE MANAGEMENT (EMPLOYEE)
=====================================================

API: POST /api/leave/apply/

Validation:
- Missing fields → error
- Past start_date → blocked
- Overlapping leave → blocked

Success:
- Leave applied with status = applied

Status:
- Working correctly

-----------------------------------------------------

API: GET /api/leave/my-requests/

Observed Behavior:
- Shows applied status
- After TL action, status changes accordingly

BUG:
- Leave gets auto-rejected even when TL does not act

-----------------------------------------------------

=====================================================
10. LEAVE MANAGEMENT (TL)
=====================================================

API: GET /api/leave/pending/

Observed Response:
- Lists team leave requests

Status:
- Working

-----------------------------------------------------

API: POST /api/leave/<leave_id>/action/

Observed Issues:
- Leave automatically rejected without TL action
- Once rejected, TL cannot change decision
- Validation blocks further action

CRITICAL BUGS:
- Wrong default state transition
- TL approval flow broken

-----------------------------------------------------

=====================================================
11. LEAVE MANAGEMENT (HR)
=====================================================

API: POST /api/leaves/<leave_id>/action/

Observed Behavior:
- Empty body allowed
- Leave rejected by default

CRITICAL BUG:
- Action and remarks should be mandatory
- HR action logic incomplete

-----------------------------------------------------

=====================================================
12. TEAM LEAD MODULE
=====================================================

API: GET /api/team/members/
- Works correctly

API: GET /api/team/attendance/
- Works with auth

API: GET /api/team/dashboard/
- Works with auth

API: GET /api/tl/list/
- Permission denied

Observation:
- Clarify if HR-only or TL-visible

-----------------------------------------------------

=====================================================
13. TL CALENDAR
=====================================================

API: PUT /api/tl/calendar/create/

Observed Behavior:
- Event created successfully

BUGS:
- Past dates allowed
- Duplicate date & time allowed

-----------------------------------------------------

API: PUT /api/tl/calendar/<id>/update/
API: DELETE /api/tl/calendar/<id>/delete/

Status:
- CRUD works

BUG:
- No validation for past/duplicate events

-----------------------------------------------------

=====================================================
14. TL ANNOUNCEMENTS
=====================================================

API: POST /api/tl/announcement/create/

Observed Behavior:
- Announcement created

BUGS:
- Past date allowed
- Duplicate time allowed

-----------------------------------------------------

API: PUT /api/tl/announcement/<id>/update/
API: DELETE /api/tl/announcement/<id>/delete/

Status:
- Works

-----------------------------------------------------

=====================================================
15. HR ANNOUNCEMENTS
=====================================================

API: POST /api/announcement/create/

Observed Error:
- DB IntegrityError when date missing

CRITICAL BUG:
- date field not validated at serializer level

-----------------------------------------------------

API: GET /api/announcement/list/
- Always returns empty list

BUG:
- Data not persisting or wrong queryset

-----------------------------------------------------

API: PATCH /api/announcement/<id>/update/
API: DELETE /api/announcement/<id>/delete/

Observed Response:
- Announcement not found

BUG:
- CRUD inconsistency

-----------------------------------------------------

END OF REPORT
