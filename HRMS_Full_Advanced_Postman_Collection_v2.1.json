{
  "info": {
    "name": "HRMS Full Advanced API Collection",
    "_postman_id": "hrms-full-advanced-001",
    "description": "Comprehensive HRMS API collection (v2.1) covering Login, EMP, HR, TL. Includes token capture scripts, example payloads, and auth header placeholders.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "LOGIN",
      "item": [
        {
          "name": "Obtain JWT Token",
          "request": {
            "url": {
              "raw": "{{base_url}}/login/token/",
              "host": ["{{base_url}}"],
              "path": ["login", "token"]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Use valid credentials; captures access and refresh tokens into environment and collection variables.",
            "body": {
              "mode": "raw",
              "raw": "{\"username\": \"employee1\", \"password\": \"Password@123\"}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "  var json = pm.response.json();",
                  "  if (json.access) pm.collectionVariables.set('access_token', json.access);",
                  "  if (json.refresh) pm.collectionVariables.set('refresh_token', json.refresh);",
                  "  pm.environment.set('access_token', json.access);",
                  "  pm.environment.set('refresh_token', json.refresh);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Refresh Token",
          "request": {
            "url": {
              "raw": "{{base_url}}/login/token/refresh/",
              "host": ["{{base_url}}"],
              "path": ["login", "token", "refresh"]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Refresh JWT using {{refresh_token}}.",
            "body": {
              "mode": "raw",
              "raw": "{\"refresh\": \"{{refresh_token}}\"}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "  var json = pm.response.json();",
                  "  pm.environment.set('access_token', json.access);",
                  "  pm.collectionVariables.set('access_token', json.access);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Forgot Password (request OTP)",
          "request": {
            "url": {
              "raw": "{{base_url}}/login/forgot-password/",
              "host": ["{{base_url}}"],
              "path": ["login", "forgot-password"]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Request password reset OTP; always returns success to prevent enumeration.",
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"user@example.com\"}"
            }
          }
        },
        {
          "name": "Verify OTP",
          "request": {
            "url": {
              "raw": "{{base_url}}/login/verify-otp/",
              "host": ["{{base_url}}"],
              "path": ["login", "verify-otp"]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Verify OTP received via email.",
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"user@example.com\", \"otp\": \"123456\"}"
            }
          }
        },
        {
          "name": "Reset Password (using OTP)",
          "request": {
            "url": {
              "raw": "{{base_url}}/login/reset-password/",
              "host": ["{{base_url}}"],
              "path": ["login", "reset-password"]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Reset password with valid OTP.",
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"user@example.com\", \"otp\": \"123456\", \"new_password\": \"NewP@ssw0rd\", \"confirm_password\": \"NewP@ssw0rd\"}"
            }
          }
        }
      ]
    },
    {
      "name": "EMP",
      "item": [
        {
          "name": "Get My Profile",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/my-profile/",
              "host": ["{{base_url}}"],
              "path": ["emp", "my-profile"]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Returns profile for logged-in user."
          }
        },
        {
          "name": "Update Contact (PATCH)",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/my-profile/contact/",
              "host": ["{{base_url}}"],
              "path": ["emp", "my-profile", "contact"]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "multipart/form-data"
              }
            ],
            "description": "Update contact; supports multipart formdata including profile_photo file.",
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "first_name",
                  "value": "John",
                  "type": "text"
                },
                {
                  "key": "last_name",
                  "value": "Doe",
                  "type": "text"
                },
                {
                  "key": "personal_email",
                  "value": "john.personal@example.com",
                  "type": "text"
                },
                {
                  "key": "phone_number",
                  "value": "9876543210",
                  "type": "text"
                },
                {
                  "key": "profile_photo",
                  "type": "file",
                  "src": ""
                }
              ]
            }
          }
        },
        {
          "name": "Update Identification (PATCH)",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/my-profile/identification/",
              "host": ["{{base_url}}"],
              "path": ["emp", "my-profile", "identification"]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "multipart/form-data"
              }
            ],
            "description": "Update identification documents.",
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "aadhaar_number",
                  "value": "123412341234",
                  "type": "text"
                },
                {
                  "key": "aadhaar_image",
                  "type": "file",
                  "src": ""
                },
                {
                  "key": "pan_number",
                  "value": "ABCDE1234F",
                  "type": "text"
                },
                {
                  "key": "pan_image",
                  "type": "file",
                  "src": ""
                }
              ]
            }
          }
        },
        {
          "name": "Clock In",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/attendance/clock-in/",
              "host": ["{{base_url}}"],
              "path": ["emp", "attendance", "clock-in"]
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Clock in for today."
          }
        },
        {
          "name": "Clock Out",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/attendance/clock-out/",
              "host": ["{{base_url}}"],
              "path": ["emp", "attendance", "clock-out"]
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Clock out for today and compute duration."
          }
        },
        {
          "name": "Attendance Days (list)",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/attendance/days/?month=2025-12",
              "host": ["{{base_url}}"],
              "path": ["emp", "attendance", "days", "?month=2025-12"]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "List attendance days; optional month param (YYYY-MM)."
          }
        },
        {
          "name": "Calendar Events",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/calendar/?year=2025&month=12",
              "host": ["{{base_url}}"],
              "path": ["emp", "calendar", "?year=2025&month=12"]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "List calendar events for given month."
          }
        },
        {
          "name": "All Announcements",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/announcements/",
              "host": ["{{base_url}}"],
              "path": ["emp", "announcements"]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "List HR announcements."
          }
        },
        {
          "name": "Notifications (list)",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/notifications/",
              "host": ["{{base_url}}"],
              "path": ["emp", "notifications"]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "List notifications for logged-in user."
          }
        },
        {
          "name": "Mark Notifications Read",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/notifications/mark-read/",
              "host": ["{{base_url}}"],
              "path": ["emp", "notifications", "mark-read"]
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Mark given notification ids as read.",
            "body": {
              "mode": "raw",
              "raw": "{\"ids\": [1, 2, 3]}"
            }
          }
        },
        {
          "name": "TL Announcements",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/tl-announcements/",
              "host": ["{{base_url}}"],
              "path": ["emp", "tl-announcements"]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Announcements from employee's team lead."
          }
        },
        {
          "name": "My Salary Details",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/payroll/my-details/",
              "host": ["{{base_url}}"],
              "path": ["emp", "payroll", "my-details"]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Get employee salary structure/details."
          }
        },
        {
          "name": "My Payslips",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/payroll/my-payslips/",
              "host": ["{{base_url}}"],
              "path": ["emp", "payroll", "my-payslips"]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "List payslips for logged user."
          }
        },
        {
          "name": "Download Payslip",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/payroll/my-payslips/2025/12/download/",
              "host": ["{{base_url}}"],
              "path": [
                "emp",
                "payroll",
                "my-payslips",
                "2025",
                "12",
                "download"
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Retrieve download URL for payslip PDF."
          }
        },
        {
          "name": "My Leave Balances",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/leave/my-balance/",
              "host": ["{{base_url}}"],
              "path": ["emp", "leave", "my-balance"]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Get leave balances for logged user."
          }
        },
        {
          "name": "My Leave Requests",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/leave/my-requests/",
              "host": ["{{base_url}}"],
              "path": ["emp", "leave", "my-requests"]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "List leave requests for logged user."
          }
        },
        {
          "name": "Apply Leave",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/leave/apply/",
              "host": ["{{base_url}}"],
              "path": ["emp", "leave", "apply"]
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Apply leave; validation includes overlap and balance checks.",
            "body": {
              "mode": "raw",
              "raw": "{\"leave_type\": \"CL\", \"start_date\": \"2025-12-20\", \"end_date\": \"2025-12-22\", \"reason\": \"Vacation\"}"
            }
          }
        },
        {
          "name": "Policy List",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/policy/",
              "host": ["{{base_url}}"],
              "path": ["emp", "policy"]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "List company policies."
          }
        },
        {
          "name": "Policy Create (HR)",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/policy/create/",
              "host": ["{{base_url}}"],
              "path": ["emp", "policy", "create"]
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Create policy - requires HR/Management role.",
            "body": {
              "mode": "raw",
              "raw": "{\"title\": \"Remote Work Policy\", \"content\": \"details here...\"}"
            }
          }
        },
        {
          "name": "HR Create Employee (multipart)",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/hr/create-employee/",
              "host": ["{{base_url}}"],
              "path": ["emp", "hr", "create-employee"]
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "multipart/form-data"
              }
            ],
            "description": "HR create employee with nested JSON fields; file support available.",
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "role",
                  "value": "employee",
                  "type": "text"
                },
                {
                  "key": "emp_id",
                  "value": "WZG-AI-9999",
                  "type": "text"
                },
                {
                  "key": "work_email",
                  "value": "new.emp@example.com",
                  "type": "text"
                },
                {
                  "key": "contact.first_name",
                  "value": "Alice",
                  "type": "text"
                },
                {
                  "key": "contact.last_name",
                  "value": "Smith",
                  "type": "text"
                },
                {
                  "key": "contact.personal_email",
                  "value": "alice.personal@example.com",
                  "type": "text"
                },
                {
                  "key": "job.job_title",
                  "value": "Developer",
                  "type": "text"
                },
                {
                  "key": "job.department",
                  "value": "Engineering",
                  "type": "text"
                },
                {
                  "key": "bank.bank_name",
                  "value": "BankX",
                  "type": "text"
                }
              ]
            }
          }
        },
        {
          "name": "Leave Action (TL/HR)",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/action/leave/1/",
              "host": ["{{base_url}}"],
              "path": ["emp", "action", "leave", "1"]
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "TL/HR action on leave request.",
            "body": {
              "mode": "raw",
              "raw": "{\"action\": \"approve\", \"remarks\": \"ok\"}"
            }
          }
        },
        {
          "name": "Timesheet Daily Form (GET)",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/timesheet/daily/form/",
              "host": ["{{base_url}}"],
              "path": ["emp", "timesheet", "daily", "form"]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        },
        {
          "name": "Timesheet Daily Update (POST)",
          "request": {
            "url": {
              "raw": "{{base_url}}/emp/timesheet/daily/update/",
              "host": ["{{base_url}}"],
              "path": ["emp", "timesheet", "daily", "update"]
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Submit today's timesheet entries.",
            "body": {
              "mode": "raw",
              "raw": "{\"entries\": [{\"start_time\": \"2025-12-10T09:00:00+05:30\", \"end_time\": \"2025-12-10T12:00:00+05:30\", \"task\": \"Coding\", \"description\": \"Feature work\"}]}"
            }
          }
        }
      ]
    },
    {
      "name": "HR",
      "item": [
        {
          "name": "HR Announcements List",
          "request": {
            "url": {
              "raw": "{{base_url}}/hr/announcements/",
              "host": ["{{base_url}}"],
              "path": ["hr", "announcements"]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        },
        {
          "name": "Create HR Announcement",
          "request": {
            "url": {
              "raw": "{{base_url}}/hr/announcement/create/",
              "host": ["{{base_url}}"],
              "path": ["hr", "announcement", "create"]
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Create HR announcement (IsHR required).",
            "body": {
              "mode": "raw",
              "raw": "{\"title\": \"Office Closed\", \"body\": \"Holiday on Monday\", \"date\": \"2025-12-25\"}"
            }
          }
        },
        {
          "name": "Update HR Announcement",
          "request": {
            "url": {
              "raw": "{{base_url}}/hr/announcement/1/",
              "host": ["{{base_url}}"],
              "path": ["hr", "announcement", "1"]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Update announcement (IsHR required).",
            "body": {
              "mode": "raw",
              "raw": "{\"title\": \"Office Closed Updated\", \"body\": \"Now closed on Tuesday\", \"date\": \"2025-12-26\"}"
            }
          }
        },
        {
          "name": "Delete HR Announcement",
          "request": {
            "url": {
              "raw": "{{base_url}}/hr/announcement/1/",
              "host": ["{{base_url}}"],
              "path": ["hr", "announcement", "1"]
            },
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "TL",
      "item": [
        {
          "name": "TL Create Announcement",
          "request": {
            "url": {
              "raw": "{{base_url}}/tl/announcement/create/",
              "host": ["{{base_url}}"],
              "path": ["tl", "announcement", "create"]
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "TL creates team announcement.",
            "body": {
              "mode": "raw",
              "raw": "{\"title\": \"Team Meeting\", \"body\": \"Standup at 10 AM\", \"date\": \"2025-12-11\"}"
            }
          }
        },
        {
          "name": "TL Team Members",
          "request": {
            "url": {
              "raw": "{{base_url}}/tl/team/members/",
              "host": ["{{base_url}}"],
              "path": ["tl", "team", "members"]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        },
        {
          "name": "TL Team Attendance",
          "request": {
            "url": {
              "raw": "{{base_url}}/tl/team/attendance/?month=2025-12",
              "host": ["{{base_url}}"],
              "path": ["tl", "team", "attendance", "?month=2025-12"]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        },
        {
          "name": "TL Dashboard",
          "request": {
            "url": {
              "raw": "{{base_url}}/tl/team/dashboard/",
              "host": ["{{base_url}}"],
              "path": ["tl", "team", "dashboard"]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        },
        {
          "name": "TL Leave Pending",
          "request": {
            "url": {
              "raw": "{{base_url}}/tl/leave/pending/",
              "host": ["{{base_url}}"],
              "path": ["tl", "leave", "pending"]
            },
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        },
        {
          "name": "TL Leave Action",
          "request": {
            "url": {
              "raw": "{{base_url}}/tl/leave/1/action/",
              "host": ["{{base_url}}"],
              "path": ["tl", "leave", "1", "action"]
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"action\": \"approve\", \"remarks\": \"ok\"}"
            }
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://127.0.0.1:8000"
    },
    {
      "key": "access_token",
      "value": ""
    },
    {
      "key": "refresh_token",
      "value": ""
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "var token = pm.environment.get('access_token') || pm.collectionVariables.get('access_token');",
          "if(token){",
          "  pm.request.headers.upsert({key:'Authorization', value:'Bearer ' + token});",
          "}"
        ]
      }
    }
  ]
}
